# КТ Классификатор ОГК

Система автоматической классификации компьютерных томографических исследований органов грудной клетки с использованием искусственного интеллекта.

## Описание

Данное MVP приложение предназначено для автоматической классификации КТ исследований ОГК на два класса:
- **"Без патологии"** - нормальные исследования
- **"С патологией"** - исследования с различными патологиями (злокачественные образования легких, туберкулез, изменения воздушности легочной ткани, переломы костных структур, расширение кровеносных сосудов и др.)

## Особенности системы

### Архитектура
- **Веб-фреймворк**: Flask
- **База данных**: SQLite с SQLAlchemy ORM
- **ИИ модель**: PyTorch CNN для классификации изображений
- **Файловое хранилище**: Персональные папки для каждого врача
- **Авторизация**: Flask-Login с хешированием паролей

### Функциональность
1. **Система авторизации и регистрации врачей**
2. **Персональное файловое хранилище** с автоматическим созданием папок
3. **Загрузка DICOM файлов** КТ исследований
4. **Автоматическая предобработка** DICOM изображений
5. **Классификация с помощью ИИ** с указанием уровня уверенности
6. **Веб-интерфейс** для удобной работы врачей
7. **Статистика и аналитика** по исследованиям

## Установка и запуск

### Требования
- Python 3.8+
- pip

### Установка зависимостей
```bash
pip install -r requirements.txt
```

### Запуск приложения
```bash
python app.py
```

Если стоит python3, то запуск командой:
```bash
python3 app.py
```

Приложение будет доступно по адресу: http://localhost:5001

### Тестовые данные
При первом запуске автоматически создается тестовый аккаунт:
- **Логин**: demo_doctor
- **Пароль**: demo123

## Структура проекта

```
ct_classification_mvp/
├── app/
│   ├── models/          # Модели базы данных
│   ├── views/           # Контроллеры (роуты)
│   ├── utils/           # Утилиты (DICOM обработка, ИИ)
│   ├── static/          # Статические файлы (CSS, JS)
│   └── templates/       # HTML шаблоны
├── data/
│   ├── studies/         # Файловое хранилище исследований
│   └── models/          # Сохраненные модели ИИ
├── logs/                # Логи приложения
├── config/              # Конфигурационные файлы
├── tests/               # Тесты
├── app.py              # Главный файл приложения
├── requirements.txt    # Зависимости Python
└── README.md          # Документация
```

## Использование

### 1. Регистрация врача
- Перейдите на страницу регистрации
- Заполните форму с ФИО, логином, email и паролем
- После регистрации автоматически создается персональная папка

### 2. Загрузка исследования
- Войдите в систему
- Перейдите в раздел "Загрузить исследование"
- Выберите DICOM файлы КТ исследования ОГК
- Укажите ID пациента и описание (опционально)

### 3. Классификация
- После загрузки нажмите "Классифицировать"
- Система автоматически обработает DICOM файлы
- ИИ модель проанализирует изображения
- Получите результат: "Без патологии" или "С патологией" с уровнем уверенности

### 4. Просмотр результатов
- Все исследования сохраняются в персональной папке врача
- Доступна статистика по всем исследованиям
- История классификаций с деталями

## Технические детали

### Обработка DICOM
- Автоматическое извлечение изображений из DICOM файлов
- Изменение размера до стандартного (512x512)

### ИИ модель
- Конвертация CT-сканов в единицы Хаунсфилда (HU), нормализация, ресайз 3D-объемов (128×128×64)
- Модель: 3D CNN с BatchNormalization и Dropout для бинарной классификации (норма/патология)
- Валидация: Стратифицированное разделение, расчет метрик AUC/Accuracy, обработка дисбаланса классов

#### Код обучения ИИ модели представлен в репозитории: https://github.com/Nastuysha/model_training

### Безопасность
- Хеширование паролей с Werkzeug
- Персональные папки для каждого врача
- Валидация загружаемых файлов
- Ограничение размера файлов (500MB)

## Контакты

Для вопросов и предложений обращайтесь к разработчикам системы.
